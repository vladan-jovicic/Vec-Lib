%/!\ /!\ 
%
% PLEASE DO NOT EDIT THIS IF YOU CAME HERE BY MISTAKE !!!!
%

% RTFMN : https://tobi.oetiker.ch/lshort/lshort.pdf

\documentclass{article}
\usepackage{xspace}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{url}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{amsfonts}
\usepackage{multicol}
\usepackage{stmaryrd}
%\usepackage{algorithme}
\usepackage{tikz, pgf}
\usetikzlibrary{arrows,intersections}
\usepackage{libertine}
\usepackage[a4paper,left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\usepackage{dsfont}


\usepackage[linktocpage]{hyperref}

\setlength{\hoffset}{-18pt}         
\setlength{\oddsidemargin}{15pt} % Marge gauche sur pages impaires
\setlength{\evensidemargin}{15pt} % Marge gauche sur pages paires
\setlength{\marginparwidth}{0pt} % Largeur de note dans la marge
\setlength{\textwidth}{481pt} % Largeur de la zone de texte 
\setlength{\marginparsep}{7pt} % Séparation de la marge
\setlength{\topmargin}{0pt} % Pas de marge en haut
\setlength{\headheight}{13pt} % Haut de page
\setlength{\headsep}{10pt} % Entre le haut de page et le texte
\setlength{\footskip}{50pt} % Bas de page + séparation
\setlength{\textheight}{600pt} % Hauteur de la zone de texte 

%\setlength{\hoffset}{-18pt}         
%\setlength{\oddsidemargin}{15pt} % Marge gauche sur pages impaires
%\setlength{\evensidemargin}{15pt} % Marge gauche sur pages paires
%\setlength{\marginparwidth}{0pt} % Largeur de note dans la marge
%\setlength{\textwidth}{481pt} % Largeur de la zone de texte 
%\setlength{\marginparsep}{7pt} % Séparation de la marge
%\setlength{\topmargin}{0pt} % Pas de marge en haut
%\setlength{\headheight}{8pt} % Haut de page
%\setlength{\headsep}{0pt} % Entre le haut de page et le texte
%\setlength{\footskip}{15pt} % Bas de page + séparation
%\setlength{\textheight}{700pt} % Hauteur de la zone de texte 

%\newcommand{\ket}[1]{\ensuremath{|#1\rangle}\xspace}
%\newcommand{\bra}[1]{\ensuremath{\langle #1|}\xspace}

\newtheorem{thm}{Theorem}[section]
\newtheorem{prop}[thm]{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{defi}[thm]{Definition}

\newcommand{\Thm}[3]{\begin{thm}[#1]\label{#2}#3\end{thm}}
\newcommand{\Ex}[3]{\begin{ex}[#1]\label{#2}#3\end{ex}}
\newcommand{\Def}[3]{\begin{defi}[#1]\label{#2}#3\end{defi}}
\newcommand{\Lem}[3]{\begin{lem}[#1]\label{#2}#3\end{lem}}
\newcommand{\Cor}[3]{\begin{cor}[#1]\label{#2}#3\end{cor}}
\newcommand{\Prop}[3]{\begin{prop}[#1]\label{#2}#3\end{prop}}

\newcommand{\hsp}{\hspace{20pt}}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\brackets}[1]{\langle#1\rangle}

\newcommand{\ind}[1]{\mathds{1}_{#1}}


\title{About Integer programming to improve the polygonization step.}
\author{Quentin Guilmant}
\date{\today}

\begin{document} 
\maketitle
\section{Introduction}

\section{Working on convex sets}

\section{Integer programming}
\subsection{Minimizing the number of vertices of the polygon.}
Suppose we have a distance $\delta$ such that each initial point of the set of point we have as an input must have a distance to the resulting polygon at most $\delta$.

We denote $S\subseteq \R^2$ the set of point we have as an input. We denote $d$ the usual euclidean distance. We denote for every $e\in S$ $x_e\in\{0,1\}$ is the variable for integer programming corresponding to $e$. The we want:
\[\forall e,f,f'\in S,x_f=x_{f'}=1, d(e, [f,f'])\leq\delta\]
Suppose we have such $e,f,f'$. Then $d(e,[f,f'])=\sqrt{\brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}}$ with $\vec{fh}=\vec{ff'}\frac{\brackets{\vec{fe},\vec{ff'}}}{\|\vec{ff'}\|^2}$. Basically, $h$ is the orthogonal projection or $e$ on $[f,f']$.\\
$d(e,[f,f'])\leq\delta\Leftrightarrow d(e,[f,f'])^2-\delta^2\leq 0\Leftrightarrow \brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}-\delta^2\leq 0$ (we work only with positive values). Then we want: 
\[\begin{array}{r l}
& \forall e\in S, \min_{f,f'\in S}((\brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}-\delta^2)x_f x_{f'})<0\\
\Leftrightarrow & \forall e\in S,\sum_{f,f'\in S} (\brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}-\delta^2)x_f x_{f'}<\sum_{f,f'\in S} |\brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}-\delta^2|x_f x_{f'}\\
\Leftrightarrow & \forall e\in S,\sum_{f,f'\in S} (|\brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}-\delta^2|-\brackets{\vec{fe},\vec{fe}}+\brackets{\vec{fh},\vec{fh}}+\delta^2)x_f x_{f'}>0
\end{array}\]

We will denote $a_{e,f,f'}=|\brackets{\vec{fe},\vec{fe}}-\brackets{\vec{fh},\vec{fh}}-\delta^2|-\brackets{\vec{fe},\vec{fe}}+\brackets{\vec{fh},\vec{fh}}+\delta^2$.

We now introduce the integer program corresponding to this problem, we call it $(P_{\delta,1})$.
\[\begin{array}{r l}
&\min\sum_{e\in S} x_e\\
\text{respect to}&\forall e\in S, \sum_{f,f'\in S}a_{e,f,f'}x_fx_{f'}>0\\
&\forall e\in S, x_e\in\{0,1\}
\end{array}\]

\subsection{Minimizing the distance to the polygon for each initial pixel}

\end{document}
